{"ast":null,"code":"var _jsxFileName = \"G:\\\\GroceriesProject\\\\Kitchenapp\\\\frontend\\\\src\\\\pages\\\\Recipes.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Recipes() {\n  _s();\n  const [recipes, setRecipes] = useState([]);\n  const [subRecipes, setSubRecipes] = useState([]);\n  const [selectedRecipe, setSelectedRecipe] = useState(null);\n  const [expandedSubRecipes, setExpandedSubRecipes] = useState({});\n  const [availableSubRecipes, setAvailableSubRecipes] = useState([]);\n  const [recipeForm, setRecipeForm] = useState({\n    name: \"\",\n    cook_time: \"\",\n    servings: \"\",\n    instructions: \"\",\n    parentRecipeId: \"\",\n    ingredients: []\n  });\n  const [editingRecipeId, setEditingRecipeId] = useState(null);\n\n  // Fetch available sub-recipes\n  const fetchAvailableSubRecipes = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes/\");\n      const data = await response.json();\n      setAvailableSubRecipes(data);\n    } catch (error) {\n      console.error(\"Error fetching available sub-recipes:\", error);\n    }\n  };\n\n  // Check for circular references\n  const checkCircularReference = async (parentId, subRecipeId) => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes/check_circular\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          parent_id: parentId,\n          sub_recipe_id: subRecipeId\n        })\n      });\n      const data = await response.json();\n      return data.circular;\n    } catch (error) {\n      console.error(\"Error checking circular reference:\", error);\n      return true; // Assume circular to be safe\n    }\n  };\n\n  // Add a sub-recipe to form\n  const addSubRecipe = () => {\n    setRecipeForm(prevForm => ({\n      ...prevForm,\n      ingredients: [...prevForm.ingredients, {\n        is_sub_recipe: true,\n        sub_recipe_id: \"\",\n        quantity: \"1\",\n        unit: \"serving\"\n      }]\n    }));\n  };\n\n  // Fetch all recipes\n  const fetchRecipes = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/recipes\");\n      const data = await response.json();\n\n      // Remove duplicate recipes (filter by unique recipe ID)\n      const uniqueRecipes = data.filter((recipe, index, self) => index === self.findIndex(r => r.id === recipe.id));\n      setRecipes(uniqueRecipes);\n    } catch (error) {\n      console.error(\"Error fetching recipes:\", error);\n    }\n  };\n\n  // Toggle a sub-recipe's expanded state\n  const toggleSubRecipe = async subRecipeId => {\n    setExpandedSubRecipes(prevState => ({\n      ...prevState,\n      [subRecipeId]: !prevState[subRecipeId] // Toggle open/closed state\n    }));\n    if (!expandedSubRecipes[subRecipeId]) {\n      try {\n        const response = await fetch(`http://127.0.0.1:5000/api/sub_recipes/${subRecipeId}`);\n        const subRecipe = await response.json();\n        setSubRecipes(prev => ({\n          ...prev,\n          [subRecipeId]: subRecipe.ingredients\n        }));\n      } catch (error) {\n        console.error(\"Error loading sub-recipe:\", error);\n      }\n    }\n  };\n\n  // Fetch all sub-recipes\n  const fetchSubRecipes = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes\");\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setSubRecipes(data);\n      } else {\n        console.error(\"Unexpected response format:\", data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching sub-recipes:\", error);\n    }\n  };\n\n  // Handle input changes\n  const handleInputChange = e => {\n    setRecipeForm({\n      ...recipeForm,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Add a new ingredient input\n  const addIngredient = () => {\n    setRecipeForm(prevForm => ({\n      ...prevForm,\n      ingredients: [...prevForm.ingredients, {\n        quantity: \"\",\n        unit: \"\",\n        size: \"\",\n        descriptor: \"\",\n        item_name: \"\",\n        additional_descriptor: \"\"\n      }]\n    }));\n  };\n\n  // Handle changes to ingredient fields\n  const handleIngredientChange = (index, field, value) => {\n    setRecipeForm(prevForm => {\n      const updatedIngredients = prevForm.ingredients.map((ingredient, i) => {\n        if (i !== index) return ingredient;\n\n        // If changing sub_recipe_id, check for circular reference\n        if (field === \"sub_recipe_id\" && editingRecipeId) {\n          checkCircularReference(editingRecipeId, value).then(isCircular => {\n            if (isCircular) {\n              alert(\"Can't add this sub-recipe as it would create a circular reference!\");\n              return {\n                ...ingredient\n              }; // Keep original value\n            }\n          });\n        }\n        return {\n          ...ingredient,\n          [field]: value\n        };\n      });\n      return {\n        ...prevForm,\n        ingredients: updatedIngredients\n      };\n    });\n  };\n\n  // Remove an ingredient\n  const removeIngredient = index => {\n    const updatedIngredients = recipeForm.ingredients.filter((_, i) => i !== index);\n    setRecipeForm({\n      ...recipeForm,\n      ingredients: updatedIngredients\n    });\n  };\n\n  // Submit form (Create or Update)\n  const handleFormSubmit = async e => {\n    e.preventDefault();\n    const method = editingRecipeId ? \"PUT\" : \"POST\";\n    const url = editingRecipeId ? `http://127.0.0.1:5000/api/recipes/${editingRecipeId}` : \"http://127.0.0.1:5000/api/recipes\";\n\n    // Prepare ingredients, separating regular ingredients from sub-recipes\n    const ingredients = recipeForm.ingredients.map(ingredient => {\n      if (ingredient.is_sub_recipe) {\n        return {\n          sub_recipe_id: ingredient.sub_recipe_id,\n          quantity: ingredient.quantity,\n          unit: ingredient.unit\n        };\n      } else {\n        return {\n          item_name: ingredient.item_name,\n          quantity: ingredient.quantity,\n          unit: ingredient.unit,\n          size: ingredient.size,\n          descriptor: ingredient.descriptor,\n          additional_descriptor: ingredient.additional_descriptor\n        };\n      }\n    });\n    try {\n      const response = await fetch(url, {\n        method: method,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          name: recipeForm.name,\n          cook_time: recipeForm.cook_time,\n          servings: recipeForm.servings,\n          instructions: recipeForm.instructions,\n          parent_recipe_id: recipeForm.parentRecipeId || null,\n          ingredients: ingredients\n        })\n      });\n      if (!response.ok) throw new Error(\"Failed to save recipe\");\n      alert(editingRecipeId ? \"Recipe updated!\" : \"Recipe added!\");\n      setRecipeForm({\n        name: \"\",\n        cook_time: \"\",\n        servings: \"\",\n        instructions: \"\",\n        ingredients: []\n      });\n      setEditingRecipeId(null);\n      fetchRecipes();\n      fetchSubRecipes();\n      fetchAvailableSubRecipes();\n    } catch (error) {\n      console.error(\"Error saving recipe:\", error);\n    }\n  };\n\n  // Delete a recipe\n  const handleDeleteRecipe = async recipeId => {\n    if (!window.confirm(\"Are you sure you want to delete this recipe?\")) return;\n    try {\n      const response = await fetch(`http://127.0.0.1:5000/api/recipes/${recipeId}`, {\n        method: \"DELETE\"\n      });\n      if (!response.ok) throw new Error(\"Failed to delete recipe\");\n      alert(\"Recipe deleted!\");\n      fetchRecipes(); // Refresh the dropdown\n      fetchSubRecipes();\n      setSelectedRecipe(null); // Clear the selected recipe\n    } catch (error) {\n      console.error(\"Error deleting recipe:\", error);\n    }\n  };\n\n  // Initialize data on component mount\n  useEffect(() => {\n    fetchRecipes();\n    fetchSubRecipes();\n    fetchAvailableSubRecipes();\n  }, []);\n\n  // Handle recipe selection\n  const handleSelectRecipe = e => {\n    const recipeId = e.target.value;\n    if (recipeId) {\n      fetch(`http://127.0.0.1:5000/api/recipes/${recipeId}`).then(response => response.json()).then(data => setSelectedRecipe(data)).catch(error => console.error(\"Error fetching recipe details:\", error));\n    } else {\n      setSelectedRecipe(null);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"recipes-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"recipes-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Recipes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"recipe-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: editingRecipeId ? \"Edit Recipe\" : \"Add a New Recipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleFormSubmit,\n        className: \"recipe-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            placeholder: \"Recipe Name\",\n            value: recipeForm.name,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"cook_time\",\n            placeholder: \"Cook Time (minutes)\",\n            value: recipeForm.cook_time,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"servings\",\n            placeholder: \"Servings\",\n            value: recipeForm.servings,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"section-header\",\n          children: \"Ingredients\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ingredient-list\",\n          children: [recipeForm.ingredients.map((ingredient, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `ingredient-row ${ingredient.is_sub_recipe ? 'sub-recipe-row' : ''}`,\n            children: ingredient.is_sub_recipe ?\n            /*#__PURE__*/\n            // Sub-recipe inputs\n            _jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                value: ingredient.sub_recipe_id || \"\",\n                onChange: e => handleIngredientChange(index, \"sub_recipe_id\", e.target.value),\n                required: true,\n                style: {\n                  flex: \"2\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"-- Select Sub-Recipe --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 23\n                }, this), availableSubRecipes.map(subRecipe => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: subRecipe.id,\n                  children: subRecipe.name\n                }, subRecipe.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 25\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"Quantity\",\n                value: ingredient.quantity || \"\",\n                onChange: e => handleIngredientChange(index, \"quantity\", e.target.value),\n                style: {\n                  flex: \"1\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: ingredient.unit || \"serving\",\n                onChange: e => handleIngredientChange(index, \"unit\", e.target.value),\n                style: {\n                  flex: \"1\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"serving\",\n                  children: \"Serving\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"whole\",\n                  children: \"Whole Recipe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"half\",\n                  children: \"Half Recipe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"quarter\",\n                  children: \"Quarter Recipe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sub-recipe-tag\",\n                children: \"Sub-Recipe\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"remove-btn\",\n                onClick: () => removeIngredient(index),\n                children: \"\\u2715\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) :\n            /*#__PURE__*/\n            // Regular ingredient inputs\n            _jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Quantity\",\n                value: ingredient.quantity || \"\",\n                onChange: e => handleIngredientChange(index, \"quantity\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: ingredient.unit || \"\",\n                onChange: e => handleIngredientChange(index, \"unit\", e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Unit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                  label: \"Volume\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"tsp\",\n                    children: \"Teaspoon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 376,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"tbsp\",\n                    children: \"Tablespoon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 377,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"fl_oz\",\n                    children: \"Fluid Ounce\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"cup\",\n                    children: \"Cup\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"pt\",\n                    children: \"Pint\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 380,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"qt\",\n                    children: \"Quart\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 381,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"gal\",\n                    children: \"Gallon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 382,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"ml\",\n                    children: \"Milliliter\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"l\",\n                    children: \"Liter\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 384,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"dl\",\n                    children: \"Deciliter\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                  label: \"Weight\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"oz\",\n                    children: \"Ounce\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"lb\",\n                    children: \"Pound\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 389,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"g\",\n                    children: \"Gram\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 390,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"kg\",\n                    children: \"Kilogram\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 391,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"mg\",\n                    children: \"Milligram\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 392,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                  label: \"Count-Based\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"piece\",\n                    children: \"Piece\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 395,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"dozen\",\n                    children: \"Dozen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 396,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"whole\",\n                    children: \"Whole\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 397,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                  label: \"Specialty\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"can\",\n                    children: \"Can\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 400,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"packet\",\n                    children: \"Packet\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 401,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"stick\",\n                    children: \"Stick\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 402,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"block\",\n                    children: \"Block\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 403,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: ingredient.size || \"\",\n                onChange: e => handleIngredientChange(index, \"size\", e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Size\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"small\",\n                  children: \"Small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"medium\",\n                  children: \"Medium\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"large\",\n                  children: \"Large\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Descriptor (e.g., fresh)\",\n                value: ingredient.descriptor || \"\",\n                onChange: e => handleIngredientChange(index, \"descriptor\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Item Name (required)\",\n                value: ingredient.item_name || \"\",\n                onChange: e => handleIngredientChange(index, \"item_name\", e.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Additional Descriptor\",\n                value: ingredient.additional_descriptor || \"\",\n                onChange: e => handleIngredientChange(index, \"additional_descriptor\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"remove-btn\",\n                onClick: () => removeIngredient(index),\n                children: \"\\u2715\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"add-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"add-btn\",\n              onClick: addIngredient,\n              children: \"+ Add Ingredient\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"add-sub-btn\",\n              onClick: addSubRecipe,\n              children: \"+ Add Sub-Recipe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"section-header\",\n          children: \"Instructions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"instructions\",\n          placeholder: \"Enter cooking instructions...\",\n          value: recipeForm.instructions,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"section-header\",\n          children: \"Parent Recipe (Optional, for Sub-Recipes)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"parentRecipeId\",\n          value: recipeForm.parentRecipeId,\n          onChange: handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- No Parent (Regular Recipe) --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 13\n          }, this), recipes.map(recipe => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: recipe.id,\n            children: recipe.name\n          }, recipe.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-btn\",\n          children: editingRecipeId ? \"Update Recipe\" : \"Add Recipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"recipe-dropdown-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"recipeDropdown\",\n        className: \"section-header\",\n        children: \"Choose a Recipe to View:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"recipeDropdown\",\n        onChange: handleSelectRecipe,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- Select a Recipe --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 11\n        }, this), recipes.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            disabled: true,\n            children: \"-- Recipes --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 15\n          }, this), recipes.map(recipe => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: recipe.id,\n            children: recipe.name\n          }, recipe.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true), subRecipes.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            disabled: true,\n            children: \"-- Sub-Recipes --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 15\n          }, this), subRecipes.map(subRecipe => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: subRecipe.id,\n            children: [subRecipe.name, \" (Sub)\"]\n          }, subRecipe.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 7\n    }, this), selectedRecipe && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"recipe-display\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: selectedRecipe.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recipe-detail-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Cook Time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 16\n          }, this), \" \", selectedRecipe.cook_time || \"N/A\", \" minutes\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Servings:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 16\n          }, this), \" \", selectedRecipe.servings || \"N/A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recipe-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Ingredients:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: selectedRecipe.ingredients && selectedRecipe.ingredients.length > 0 ? selectedRecipe.ingredients.map((ingredient, index) => {\n            // Check if the ingredient is actually a sub-recipe\n            if (ingredient.ingredient && ingredient.ingredient.used_in_recipes && ingredient.ingredient.used_in_recipes.some(r => r.id)) {\n              var _subRecipes$ingredien;\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"sub-recipe\",\n                onClick: () => toggleSubRecipe(ingredient.ingredient.id),\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [ingredient.quantity, \" \", ingredient.unit, \" \", ingredient.ingredient.name, \" (Sub-Recipe) \\u2B07\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  id: `sub-recipe-${ingredient.ingredient.id}`,\n                  style: {\n                    display: expandedSubRecipes[ingredient.ingredient.id] ? \"block\" : \"none\"\n                  },\n                  children: expandedSubRecipes[ingredient.ingredient.id] && ((_subRecipes$ingredien = subRecipes[ingredient.ingredient.id]) === null || _subRecipes$ingredien === void 0 ? void 0 : _subRecipes$ingredien.map((subIngredient, subIdx) => {\n                    var _subIngredient$ingred;\n                    return /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [subIngredient.quantity, \" \", subIngredient.unit, \" \", ((_subIngredient$ingred = subIngredient.ingredient) === null || _subIngredient$ingred === void 0 ? void 0 : _subIngredient$ingred.name) || \"N/A\"]\n                    }, `sub-${subIdx}`, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 542,\n                      columnNumber: 29\n                    }, this);\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 540,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 23\n              }, this);\n            } else {\n              var _ingredient$ingredien;\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [ingredient.quantity, \" \", ingredient.unit, ingredient.size ? ` ${ingredient.size}` : '', ingredient.descriptor ? ` ${ingredient.descriptor} ` : ' ', ((_ingredient$ingredien = ingredient.ingredient) === null || _ingredient$ingredien === void 0 ? void 0 : _ingredient$ingredien.name) || \"N/A\", ingredient.additional_descriptor ? `, ${ingredient.additional_descriptor}` : '']\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 23\n              }, this);\n            }\n          }) : /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"No ingredients listed.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 11\n      }, this), selectedRecipe.components && selectedRecipe.components.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recipe-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Sub-Recipes:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: selectedRecipe.components.map((component, index) => {\n            var _component$sub_recipe;\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"sub-recipe-item\",\n              children: [component.quantity, \" \", ((_component$sub_recipe = component.sub_recipe) === null || _component$sub_recipe === void 0 ? void 0 : _component$sub_recipe.name) || \"Unknown Recipe\", /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setSelectedRecipe(component.sub_recipe);\n                },\n                className: \"view-sub-btn\",\n                children: \"View\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 19\n              }, this)]\n            }, `component-${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recipe-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Instructions:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"recipe-instructions\",\n          children: selectedRecipe.instructions || \"No instructions available.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recipe-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setEditingRecipeId(selectedRecipe.id);\n\n            // Pre-populate the form with the selected recipe data\n            setRecipeForm({\n              name: selectedRecipe.name,\n              cook_time: selectedRecipe.cook_time,\n              servings: selectedRecipe.servings,\n              instructions: selectedRecipe.instructions,\n              parentRecipeId: \"\",\n              ingredients: selectedRecipe.ingredients\n            });\n\n            // Scroll to the form\n            window.scrollTo({\n              top: 0,\n              behavior: 'smooth'\n            });\n          },\n          children: \"Edit Recipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDeleteRecipe(selectedRecipe.id),\n          children: \"Delete Recipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 5\n  }, this);\n}\n_s(Recipes, \"zwoDgQBYk2cK/WCGKheWfErWNV0=\");\n_c = Recipes;\nexport default Recipes;\nvar _c;\n$RefreshReg$(_c, \"Recipes\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","Recipes","_s","recipes","setRecipes","subRecipes","setSubRecipes","selectedRecipe","setSelectedRecipe","expandedSubRecipes","setExpandedSubRecipes","availableSubRecipes","setAvailableSubRecipes","recipeForm","setRecipeForm","name","cook_time","servings","instructions","parentRecipeId","ingredients","editingRecipeId","setEditingRecipeId","fetchAvailableSubRecipes","response","fetch","data","json","error","console","checkCircularReference","parentId","subRecipeId","method","headers","body","JSON","stringify","parent_id","sub_recipe_id","circular","addSubRecipe","prevForm","is_sub_recipe","quantity","unit","fetchRecipes","uniqueRecipes","filter","recipe","index","self","findIndex","r","id","toggleSubRecipe","prevState","subRecipe","prev","fetchSubRecipes","Array","isArray","handleInputChange","e","target","value","addIngredient","size","descriptor","item_name","additional_descriptor","handleIngredientChange","field","updatedIngredients","map","ingredient","i","then","isCircular","alert","removeIngredient","_","handleFormSubmit","preventDefault","url","parent_recipe_id","ok","Error","handleDeleteRecipe","recipeId","window","confirm","handleSelectRecipe","catch","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","required","style","flex","onClick","label","htmlFor","length","disabled","used_in_recipes","some","_subRecipes$ingredien","display","subIngredient","subIdx","_subIngredient$ingred","_ingredient$ingredien","components","component","_component$sub_recipe","sub_recipe","scrollTo","top","behavior","_c","$RefreshReg$"],"sources":["G:/GroceriesProject/Kitchenapp/frontend/src/pages/Recipes.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nfunction Recipes() {\r\n  const [recipes, setRecipes] = useState([]);\r\n  const [subRecipes, setSubRecipes] = useState([]);\r\n  const [selectedRecipe, setSelectedRecipe] = useState(null);\r\n  const [expandedSubRecipes, setExpandedSubRecipes] = useState({});\r\n  const [availableSubRecipes, setAvailableSubRecipes] = useState([]);\r\n  \r\n  const [recipeForm, setRecipeForm] = useState({\r\n    name: \"\",\r\n    cook_time: \"\",\r\n    servings: \"\",\r\n    instructions: \"\",\r\n    parentRecipeId: \"\",\r\n    ingredients: [],\r\n  });\r\n  \r\n  const [editingRecipeId, setEditingRecipeId] = useState(null);\r\n  \r\n  // Fetch available sub-recipes\r\n  const fetchAvailableSubRecipes = async () => {\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes/\");\r\n      const data = await response.json();\r\n      setAvailableSubRecipes(data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching available sub-recipes:\", error);\r\n    }\r\n  };\r\n\r\n  // Check for circular references\r\n  const checkCircularReference = async (parentId, subRecipeId) => {\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes/check_circular\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ parent_id: parentId, sub_recipe_id: subRecipeId })\r\n      });\r\n      const data = await response.json();\r\n      return data.circular;\r\n    } catch (error) {\r\n      console.error(\"Error checking circular reference:\", error);\r\n      return true; // Assume circular to be safe\r\n    }\r\n  };\r\n\r\n  // Add a sub-recipe to form\r\n  const addSubRecipe = () => {\r\n    setRecipeForm((prevForm) => ({\r\n      ...prevForm,\r\n      ingredients: [\r\n        ...prevForm.ingredients,\r\n        {\r\n          is_sub_recipe: true,\r\n          sub_recipe_id: \"\",\r\n          quantity: \"1\",\r\n          unit: \"serving\",\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n\r\n  // Fetch all recipes\r\n  const fetchRecipes = async () => {\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:5000/api/recipes\");\r\n      const data = await response.json();\r\n  \r\n      // Remove duplicate recipes (filter by unique recipe ID)\r\n      const uniqueRecipes = data.filter(\r\n        (recipe, index, self) => index === self.findIndex(r => r.id === recipe.id)\r\n      );\r\n  \r\n      setRecipes(uniqueRecipes);\r\n    } catch (error) {\r\n      console.error(\"Error fetching recipes:\", error);\r\n    }\r\n  };\r\n  \r\n  // Toggle a sub-recipe's expanded state\r\n  const toggleSubRecipe = async (subRecipeId) => {\r\n    setExpandedSubRecipes(prevState => ({\r\n      ...prevState,\r\n      [subRecipeId]: !prevState[subRecipeId], // Toggle open/closed state\r\n    }));\r\n  \r\n    if (!expandedSubRecipes[subRecipeId]) {\r\n      try {\r\n        const response = await fetch(`http://127.0.0.1:5000/api/sub_recipes/${subRecipeId}`);\r\n        const subRecipe = await response.json();\r\n  \r\n        setSubRecipes((prev) => ({\r\n          ...prev,\r\n          [subRecipeId]: subRecipe.ingredients,\r\n        }));\r\n      } catch (error) {\r\n        console.error(\"Error loading sub-recipe:\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Fetch all sub-recipes\r\n  const fetchSubRecipes = async () => {\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes\");\r\n      const data = await response.json();\r\n  \r\n      if (Array.isArray(data)) {\r\n        setSubRecipes(data);\r\n      } else {\r\n        console.error(\"Unexpected response format:\", data);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching sub-recipes:\", error);\r\n    }\r\n  };\r\n  \r\n  // Handle input changes\r\n  const handleInputChange = (e) => {\r\n    setRecipeForm({ ...recipeForm, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // Add a new ingredient input\r\n  const addIngredient = () => {\r\n    setRecipeForm((prevForm) => ({\r\n      ...prevForm,\r\n      ingredients: [\r\n        ...prevForm.ingredients,\r\n        {\r\n          quantity: \"\",\r\n          unit: \"\",\r\n          size: \"\",\r\n          descriptor: \"\",\r\n          item_name: \"\",\r\n          additional_descriptor: \"\",\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n  \r\n  // Handle changes to ingredient fields\r\n  const handleIngredientChange = (index, field, value) => {\r\n    setRecipeForm((prevForm) => {\r\n      const updatedIngredients = prevForm.ingredients.map((ingredient, i) => {\r\n        if (i !== index) return ingredient;\r\n        \r\n        // If changing sub_recipe_id, check for circular reference\r\n        if (field === \"sub_recipe_id\" && editingRecipeId) {\r\n          checkCircularReference(editingRecipeId, value)\r\n            .then(isCircular => {\r\n              if (isCircular) {\r\n                alert(\"Can't add this sub-recipe as it would create a circular reference!\");\r\n                return { ...ingredient }; // Keep original value\r\n              }\r\n            });\r\n        }\r\n        \r\n        return { ...ingredient, [field]: value };\r\n      });\r\n      return { ...prevForm, ingredients: updatedIngredients };\r\n    });\r\n  };\r\n  \r\n  // Remove an ingredient\r\n  const removeIngredient = (index) => {\r\n    const updatedIngredients = recipeForm.ingredients.filter((_, i) => i !== index);\r\n    setRecipeForm({ ...recipeForm, ingredients: updatedIngredients });\r\n  };\r\n  \r\n  // Submit form (Create or Update)\r\n  const handleFormSubmit = async (e) => {\r\n    e.preventDefault();\r\n  \r\n    const method = editingRecipeId ? \"PUT\" : \"POST\";\r\n    const url = editingRecipeId\r\n      ? `http://127.0.0.1:5000/api/recipes/${editingRecipeId}`\r\n      : \"http://127.0.0.1:5000/api/recipes\";\r\n  \r\n    // Prepare ingredients, separating regular ingredients from sub-recipes\r\n    const ingredients = recipeForm.ingredients.map(ingredient => {\r\n      if (ingredient.is_sub_recipe) {\r\n        return {\r\n          sub_recipe_id: ingredient.sub_recipe_id,\r\n          quantity: ingredient.quantity,\r\n          unit: ingredient.unit,\r\n        };\r\n      } else {\r\n        return {\r\n          item_name: ingredient.item_name,\r\n          quantity: ingredient.quantity,\r\n          unit: ingredient.unit,\r\n          size: ingredient.size,\r\n          descriptor: ingredient.descriptor,\r\n          additional_descriptor: ingredient.additional_descriptor\r\n        };\r\n      }\r\n    });\r\n  \r\n    try {\r\n      const response = await fetch(url, {\r\n        method: method,\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          name: recipeForm.name,  \r\n          cook_time: recipeForm.cook_time,\r\n          servings: recipeForm.servings,\r\n          instructions: recipeForm.instructions,\r\n          parent_recipe_id: recipeForm.parentRecipeId || null,\r\n          ingredients: ingredients\r\n        })\r\n      });\r\n  \r\n      if (!response.ok) throw new Error(\"Failed to save recipe\");\r\n  \r\n      alert(editingRecipeId ? \"Recipe updated!\" : \"Recipe added!\");\r\n      setRecipeForm({ \r\n        name: \"\", \r\n        cook_time: \"\", \r\n        servings: \"\", \r\n        instructions: \"\", \r\n        ingredients: [] \r\n      });\r\n      setEditingRecipeId(null);\r\n  \r\n      fetchRecipes();\r\n      fetchSubRecipes();\r\n      fetchAvailableSubRecipes();\r\n  \r\n    } catch (error) {\r\n      console.error(\"Error saving recipe:\", error);\r\n    }\r\n  };\r\n  \r\n  // Delete a recipe\r\n  const handleDeleteRecipe = async (recipeId) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this recipe?\")) return;\r\n  \r\n    try {\r\n      const response = await fetch(`http://127.0.0.1:5000/api/recipes/${recipeId}`, {\r\n        method: \"DELETE\",\r\n      });\r\n  \r\n      if (!response.ok) throw new Error(\"Failed to delete recipe\");\r\n  \r\n      alert(\"Recipe deleted!\");\r\n      fetchRecipes(); // Refresh the dropdown\r\n      fetchSubRecipes();\r\n      setSelectedRecipe(null); // Clear the selected recipe\r\n    } catch (error) {\r\n      console.error(\"Error deleting recipe:\", error);\r\n    }\r\n  };\r\n\r\n  // Initialize data on component mount\r\n  useEffect(() => {\r\n    fetchRecipes();\r\n    fetchSubRecipes();\r\n    fetchAvailableSubRecipes();\r\n  }, []);\r\n  \r\n  // Handle recipe selection\r\n  const handleSelectRecipe = (e) => {\r\n    const recipeId = e.target.value;\r\n    if (recipeId) {\r\n      fetch(`http://127.0.0.1:5000/api/recipes/${recipeId}`)\r\n        .then((response) => response.json())\r\n        .then((data) => setSelectedRecipe(data))\r\n        .catch((error) => console.error(\"Error fetching recipe details:\", error));\r\n    } else {\r\n      setSelectedRecipe(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"recipes-container\">\r\n      <div className=\"recipes-header\">\r\n        <h1>Recipes</h1>\r\n      </div>\r\n      \r\n      {/* Recipe Form Section */}\r\n      <div className=\"recipe-form-container\">\r\n        <div className=\"form-header\">\r\n          <h2>{editingRecipeId ? \"Edit Recipe\" : \"Add a New Recipe\"}</h2>\r\n        </div>\r\n        \r\n        <form onSubmit={handleFormSubmit} className=\"recipe-form\">\r\n          <div className=\"form-row\">\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              placeholder=\"Recipe Name\"\r\n              value={recipeForm.name}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n            <input\r\n              type=\"number\"\r\n              name=\"cook_time\"\r\n              placeholder=\"Cook Time (minutes)\"\r\n              value={recipeForm.cook_time}\r\n              onChange={handleInputChange}\r\n            />\r\n            <input\r\n              type=\"number\"\r\n              name=\"servings\"\r\n              placeholder=\"Servings\"\r\n              value={recipeForm.servings}\r\n              onChange={handleInputChange}\r\n            />\r\n          </div>\r\n\r\n          <h3 className=\"section-header\">Ingredients</h3>\r\n          <div className=\"ingredient-list\">\r\n            {recipeForm.ingredients.map((ingredient, index) => (\r\n              <div \r\n                key={index} \r\n                className={`ingredient-row ${ingredient.is_sub_recipe ? 'sub-recipe-row' : ''}`}\r\n              >\r\n                {ingredient.is_sub_recipe ? (\r\n                  // Sub-recipe inputs\r\n                  <>\r\n                    <select\r\n                      value={ingredient.sub_recipe_id || \"\"}\r\n                      onChange={(e) => handleIngredientChange(index, \"sub_recipe_id\", e.target.value)}\r\n                      required\r\n                      style={{ flex: \"2\" }}\r\n                    >\r\n                      <option value=\"\">-- Select Sub-Recipe --</option>\r\n                      {availableSubRecipes.map((subRecipe) => (\r\n                        <option key={subRecipe.id} value={subRecipe.id}>\r\n                          {subRecipe.name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                    \r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"Quantity\"\r\n                      value={ingredient.quantity || \"\"}\r\n                      onChange={(e) => handleIngredientChange(index, \"quantity\", e.target.value)}\r\n                      style={{ flex: \"1\" }}\r\n                    />\r\n                    \r\n                    <select\r\n                      value={ingredient.unit || \"serving\"}\r\n                      onChange={(e) => handleIngredientChange(index, \"unit\", e.target.value)}\r\n                      style={{ flex: \"1\" }}\r\n                    >\r\n                      <option value=\"serving\">Serving</option>\r\n                      <option value=\"whole\">Whole Recipe</option>\r\n                      <option value=\"half\">Half Recipe</option>\r\n                      <option value=\"quarter\">Quarter Recipe</option>\r\n                    </select>\r\n                    \r\n                    <div className=\"sub-recipe-tag\">Sub-Recipe</div>\r\n                    \r\n                    <button type=\"button\" className=\"remove-btn\" onClick={() => removeIngredient(index)}>✕</button>\r\n                  </>\r\n                ) : (\r\n                  // Regular ingredient inputs\r\n                  <>\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Quantity\"\r\n                      value={ingredient.quantity || \"\"}\r\n                      onChange={(e) => handleIngredientChange(index, \"quantity\", e.target.value)}\r\n                    />\r\n\r\n                    <select\r\n                      value={ingredient.unit || \"\"}\r\n                      onChange={(e) => handleIngredientChange(index, \"unit\", e.target.value)}\r\n                    >\r\n                      <option value=\"\">Unit</option>\r\n                      <optgroup label=\"Volume\">\r\n                        <option value=\"tsp\">Teaspoon</option>\r\n                        <option value=\"tbsp\">Tablespoon</option>\r\n                        <option value=\"fl_oz\">Fluid Ounce</option>\r\n                        <option value=\"cup\">Cup</option>\r\n                        <option value=\"pt\">Pint</option>\r\n                        <option value=\"qt\">Quart</option>\r\n                        <option value=\"gal\">Gallon</option>\r\n                        <option value=\"ml\">Milliliter</option>\r\n                        <option value=\"l\">Liter</option>\r\n                        <option value=\"dl\">Deciliter</option>\r\n                      </optgroup>\r\n                      <optgroup label=\"Weight\">\r\n                        <option value=\"oz\">Ounce</option>\r\n                        <option value=\"lb\">Pound</option>\r\n                        <option value=\"g\">Gram</option>\r\n                        <option value=\"kg\">Kilogram</option>\r\n                        <option value=\"mg\">Milligram</option>\r\n                      </optgroup>\r\n                      <optgroup label=\"Count-Based\">\r\n                        <option value=\"piece\">Piece</option>\r\n                        <option value=\"dozen\">Dozen</option>\r\n                        <option value=\"whole\">Whole</option>\r\n                      </optgroup>\r\n                      <optgroup label=\"Specialty\">\r\n                        <option value=\"can\">Can</option>\r\n                        <option value=\"packet\">Packet</option>\r\n                        <option value=\"stick\">Stick</option>\r\n                        <option value=\"block\">Block</option>\r\n                      </optgroup>\r\n                    </select>\r\n\r\n                    <select\r\n                      value={ingredient.size || \"\"}\r\n                      onChange={(e) => handleIngredientChange(index, \"size\", e.target.value)}\r\n                    >\r\n                      <option value=\"\">Size</option>\r\n                      <option value=\"small\">Small</option>\r\n                      <option value=\"medium\">Medium</option>\r\n                      <option value=\"large\">Large</option>\r\n                    </select>\r\n\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Descriptor (e.g., fresh)\"\r\n                      value={ingredient.descriptor || \"\"}\r\n                      onChange={(e) => handleIngredientChange(index, \"descriptor\", e.target.value)}\r\n                    />\r\n\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Item Name (required)\"\r\n                      value={ingredient.item_name || \"\"}\r\n                      onChange={(e) => handleIngredientChange(index, \"item_name\", e.target.value)}\r\n                      required\r\n                    />\r\n\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Additional Descriptor\"\r\n                      value={ingredient.additional_descriptor || \"\"}\r\n                      onChange={(e) => handleIngredientChange(index, \"additional_descriptor\", e.target.value)}\r\n                    />\r\n\r\n                    <button type=\"button\" className=\"remove-btn\" onClick={() => removeIngredient(index)}>✕</button>\r\n                  </>\r\n                )}\r\n              </div>\r\n            ))}\r\n\r\n            {/* Add buttons for both regular ingredients and sub-recipes */}\r\n            <div className=\"add-buttons\">\r\n              <button type=\"button\" className=\"add-btn\" onClick={addIngredient}>\r\n                + Add Ingredient\r\n              </button>\r\n              <button type=\"button\" className=\"add-sub-btn\" onClick={addSubRecipe}>\r\n                + Add Sub-Recipe\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <h3 className=\"section-header\">Instructions</h3>\r\n          <textarea\r\n            name=\"instructions\"\r\n            placeholder=\"Enter cooking instructions...\"\r\n            value={recipeForm.instructions}\r\n            onChange={handleInputChange}\r\n          />\r\n\r\n          <h3 className=\"section-header\">Parent Recipe (Optional, for Sub-Recipes)</h3>\r\n          <select\r\n            name=\"parentRecipeId\"\r\n            value={recipeForm.parentRecipeId}\r\n            onChange={handleInputChange}\r\n          >\r\n            <option value=\"\">-- No Parent (Regular Recipe) --</option>\r\n            {recipes.map((recipe) => (\r\n              <option key={recipe.id} value={recipe.id}>\r\n                {recipe.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          <button type=\"submit\" className=\"submit-btn\">\r\n            {editingRecipeId ? \"Update Recipe\" : \"Add Recipe\"}\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      {/* Recipe Selection Dropdown */}\r\n      <div className=\"recipe-dropdown-container\">\r\n        <label htmlFor=\"recipeDropdown\" className=\"section-header\">Choose a Recipe to View:</label>\r\n        <select id=\"recipeDropdown\" onChange={handleSelectRecipe}>\r\n          <option value=\"\">-- Select a Recipe --</option>\r\n\r\n          {/* Regular Recipes */}\r\n          {recipes.length > 0 && (\r\n            <>\r\n              <option disabled>-- Recipes --</option>\r\n              {recipes.map((recipe) => (\r\n                <option key={recipe.id} value={recipe.id}>\r\n                  {recipe.name}\r\n                </option>\r\n              ))}\r\n            </>\r\n          )}\r\n\r\n          {/* Sub-Recipes Section */}\r\n          {subRecipes.length > 0 && (\r\n            <>\r\n              <option disabled>-- Sub-Recipes --</option>\r\n              {subRecipes.map((subRecipe) => (\r\n                <option key={subRecipe.id} value={subRecipe.id}>\r\n                  {subRecipe.name} (Sub)\r\n                </option>\r\n              ))}\r\n            </>\r\n          )}\r\n        </select>\r\n      </div>\r\n\r\n      {/* Recipe Display Section */}\r\n      {selectedRecipe && (\r\n        <div className=\"recipe-display\">\r\n          <h2>{selectedRecipe.name}</h2>\r\n          \r\n          <div className=\"recipe-detail-row\">\r\n            <p><strong>Cook Time:</strong> {selectedRecipe.cook_time || \"N/A\"} minutes</p>\r\n            <p><strong>Servings:</strong> {selectedRecipe.servings || \"N/A\"}</p>\r\n          </div>\r\n          \r\n          <div className=\"recipe-section\">\r\n            <h3>Ingredients:</h3>\r\n            <ul>\r\n              {selectedRecipe.ingredients && selectedRecipe.ingredients.length > 0 ? (\r\n                selectedRecipe.ingredients.map((ingredient, index) => {\r\n                  // Check if the ingredient is actually a sub-recipe\r\n                  if (ingredient.ingredient && \r\n                      ingredient.ingredient.used_in_recipes && \r\n                      ingredient.ingredient.used_in_recipes.some(r => r.id)) {\r\n                    return (\r\n                      <li key={index} className=\"sub-recipe\" onClick={() => toggleSubRecipe(ingredient.ingredient.id)}>\r\n                        <span>\r\n                          {ingredient.quantity} {ingredient.unit} {ingredient.ingredient.name} (Sub-Recipe) ⬇\r\n                        </span>\r\n                        <ul id={`sub-recipe-${ingredient.ingredient.id}`} style={{ display: expandedSubRecipes[ingredient.ingredient.id] ? \"block\" : \"none\" }}>\r\n                          {expandedSubRecipes[ingredient.ingredient.id] && subRecipes[ingredient.ingredient.id]?.map((subIngredient, subIdx) => (\r\n                            <li key={`sub-${subIdx}`}>\r\n                              {subIngredient.quantity} {subIngredient.unit} {subIngredient.ingredient?.name || \"N/A\"}\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </li>\r\n                    );\r\n                  } else {\r\n                    return (\r\n                      <li key={index}>\r\n                        {ingredient.quantity} {ingredient.unit}\r\n                        {ingredient.size ? ` ${ingredient.size}` : ''} \r\n                        {ingredient.descriptor ? ` ${ingredient.descriptor} ` : ' '}\r\n                        {ingredient.ingredient?.name || \"N/A\"}\r\n                        {ingredient.additional_descriptor ? `, ${ingredient.additional_descriptor}` : ''}\r\n                      </li>\r\n                    );\r\n                  }\r\n                })\r\n              ) : (\r\n                <li>No ingredients listed.</li>\r\n              )}\r\n            </ul>\r\n          </div>\r\n          \r\n          {/* Show sub-recipes if they exist */}\r\n          {selectedRecipe.components && selectedRecipe.components.length > 0 && (\r\n            <div className=\"recipe-section\">\r\n            <h3>Sub-Recipes:</h3>\r\n            <ul>\r\n              {selectedRecipe.components.map((component, index) => (\r\n                <li key={`component-${index}`} className=\"sub-recipe-item\">\r\n                  {component.quantity} {component.sub_recipe?.name || \"Unknown Recipe\"}\r\n                  <button \r\n                    onClick={() => {\r\n                      setSelectedRecipe(component.sub_recipe);\r\n                    }}\r\n                    className=\"view-sub-btn\"\r\n                  >\r\n                    View\r\n                  </button>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"recipe-section\">\r\n          <h3>Instructions:</h3>\r\n          <p className=\"recipe-instructions\">{selectedRecipe.instructions || \"No instructions available.\"}</p>\r\n        </div>\r\n\r\n        <div className=\"recipe-actions\">\r\n          <button onClick={() => {\r\n            setEditingRecipeId(selectedRecipe.id);\r\n            \r\n            // Pre-populate the form with the selected recipe data\r\n            setRecipeForm({\r\n              name: selectedRecipe.name,\r\n              cook_time: selectedRecipe.cook_time,\r\n              servings: selectedRecipe.servings,\r\n              instructions: selectedRecipe.instructions,\r\n              parentRecipeId: \"\",\r\n              ingredients: selectedRecipe.ingredients\r\n            });\r\n            \r\n            // Scroll to the form\r\n            window.scrollTo({ top: 0, behavior: 'smooth' });\r\n          }}>\r\n            Edit Recipe\r\n          </button>\r\n          <button onClick={() => handleDeleteRecipe(selectedRecipe.id)}>\r\n            Delete Recipe\r\n          </button>\r\n        </div>\r\n      </div>\r\n    )}\r\n  </div>\r\n);\r\n}\r\n\r\nexport default Recipes;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}