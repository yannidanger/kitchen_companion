{"ast":null,"code":"var _jsxFileName = \"G:\\\\GroceriesProject\\\\Kitchenapp\\\\frontend\\\\src\\\\pages\\\\Recipes.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Recipes() {\n  _s();\n  const [recipes, setRecipes] = useState([]);\n  const [subRecipes, setSubRecipes] = useState([]);\n  const [selectedRecipe, setSelectedRecipe] = useState(null);\n  const [expandedSubRecipes, setExpandedSubRecipes] = useState({});\n  const [availableSubRecipes, setAvailableSubRecipes] = useState([]);\n  const [recipeForm, setRecipeForm] = useState({\n    name: \"\",\n    cook_time: \"\",\n    servings: \"\",\n    instructions: \"\",\n    parentRecipeId: \"\",\n    // ✅ NEW: Store parent recipe ID\n    ingredients: [] // ✅ NEW: Store ingredients as an array\n  });\n  const [editingRecipeId, setEditingRecipeId] = useState(null);\n\n  // Add this function to fetch available sub-recipes\n  const fetchAvailableSubRecipes = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes/\");\n      const data = await response.json();\n      setAvailableSubRecipes(data);\n    } catch (error) {\n      console.error(\"Error fetching available sub-recipes:\", error);\n    }\n  };\n\n  // Add this function to check for circular references\n  const checkCircularReference = async (parentId, subRecipeId) => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes/check_circular\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          parent_id: parentId,\n          sub_recipe_id: subRecipeId\n        })\n      });\n      const data = await response.json();\n      return data.circular;\n    } catch (error) {\n      console.error(\"Error checking circular reference:\", error);\n      return true; // Assume circular to be safe\n    }\n  };\n\n  // Add a new function to handle adding a sub-recipe\n  const addSubRecipe = () => {\n    setRecipeForm(prevForm => ({\n      ...prevForm,\n      ingredients: [...prevForm.ingredients, {\n        is_sub_recipe: true,\n        sub_recipe_id: \"\",\n        quantity: \"1\",\n        unit: \"serving\"\n      }]\n    }));\n  };\n  const fetchRecipes = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/recipes\");\n      const data = await response.json();\n\n      // Remove duplicate recipes (filter by unique recipe ID)\n      const uniqueRecipes = data.filter((recipe, index, self) => index === self.findIndex(r => r.id === recipe.id));\n      setRecipes(uniqueRecipes);\n    } catch (error) {\n      console.error(\"Error fetching recipes:\", error);\n    }\n  };\n  const toggleSubRecipe = async subRecipeId => {\n    setExpandedSubRecipes(prevState => ({\n      ...prevState,\n      [subRecipeId]: !prevState[subRecipeId] // Toggle open/closed state\n    }));\n    if (!expandedSubRecipes[subRecipeId]) {\n      try {\n        const response = await fetch(`http://127.0.0.1:5000/api/sub_recipes/${subRecipeId}`);\n        const subRecipe = await response.json();\n        setSubRecipes(prev => ({\n          ...prev,\n          [subRecipeId]: subRecipe.ingredients\n        }));\n      } catch (error) {\n        console.error(\"Error loading sub-recipe:\", error);\n      }\n    }\n  };\n  const fetchSubRecipes = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes\");\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setSubRecipes(data);\n      } else {\n        console.error(\"Unexpected response format:\", data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching sub-recipes:\", error);\n    }\n  };\n\n  // Handle input changes\n  const handleInputChange = e => {\n    setRecipeForm({\n      ...recipeForm,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // Add a new ingredient input\n  const addIngredient = () => {\n    setRecipeForm(prevForm => ({\n      ...prevForm,\n      ingredients: [...prevForm.ingredients, {\n        quantity: \"\",\n        unit: \"\",\n        size: \"\",\n        descriptor: \"\",\n        item_name: \"\",\n        additional_descriptor: \"\"\n      }]\n    }));\n  };\n  const handleIngredientChange = (index, field, value) => {\n    setRecipeForm(prevForm => {\n      const updatedIngredients = prevForm.ingredients.map((ingredient, i) => {\n        if (i !== index) return ingredient;\n\n        // If changing sub_recipe_id, check for circular reference\n        if (field === \"sub_recipe_id\" && editingRecipeId) {\n          checkCircularReference(editingRecipeId, value).then(isCircular => {\n            if (isCircular) {\n              alert(\"Can't add this sub-recipe as it would create a circular reference!\");\n              return {\n                ...ingredient\n              }; // Keep original value\n            }\n          });\n        }\n        return {\n          ...ingredient,\n          [field]: value\n        };\n      });\n      return {\n        ...prevForm,\n        ingredients: updatedIngredients\n      };\n    });\n  };\n\n  // Remove an ingredient\n  const removeIngredient = index => {\n    const updatedIngredients = recipeForm.ingredients.filter((_, i) => i !== index);\n    setRecipeForm({\n      ...recipeForm,\n      ingredients: updatedIngredients\n    });\n  };\n\n  // Submit form (Create or Update)\n  const handleFormSubmit = async e => {\n    e.preventDefault();\n    const method = editingRecipeId ? \"PUT\" : \"POST\";\n    const url = editingRecipeId ? `http://127.0.0.1:5000/api/recipes/${editingRecipeId}` : \"http://127.0.0.1:5000/api/recipes\";\n\n    // Prepare ingredients, separating regular ingredients from sub-recipes\n    const ingredients = recipeForm.ingredients.map(ingredient => {\n      if (ingredient.is_sub_recipe) {\n        return {\n          sub_recipe_id: ingredient.sub_recipe_id,\n          quantity: ingredient.quantity,\n          unit: ingredient.unit\n        };\n      } else {\n        return {\n          item_name: ingredient.item_name,\n          quantity: ingredient.quantity,\n          unit: ingredient.unit,\n          size: ingredient.size,\n          descriptor: ingredient.descriptor,\n          additional_descriptor: ingredient.additional_descriptor\n        };\n      }\n    });\n    try {\n      const response = await fetch(url, {\n        method: method,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          name: recipeForm.name,\n          cook_time: recipeForm.cook_time,\n          servings: recipeForm.servings,\n          instructions: recipeForm.instructions,\n          parent_recipe_id: recipeForm.parentRecipeId || null,\n          ingredients: ingredients\n        })\n      });\n      if (!response.ok) throw new Error(\"Failed to save recipe\");\n      alert(editingRecipeId ? \"Recipe updated!\" : \"Recipe added!\");\n      setRecipeForm({\n        name: \"\",\n        cook_time: \"\",\n        servings: \"\",\n        instructions: \"\",\n        ingredients: []\n      });\n      setEditingRecipeId(null);\n      fetchRecipes();\n      fetchSubRecipes();\n      fetchAvailableSubRecipes();\n    } catch (error) {\n      console.error(\"Error saving recipe:\", error);\n    }\n  };\n  const handleDeleteRecipe = async recipeId => {\n    if (!window.confirm(\"Are you sure you want to delete this recipe?\")) return;\n    try {\n      const response = await fetch(`http://127.0.0.1:5000/api/recipes/${recipeId}`, {\n        method: \"DELETE\"\n      });\n      if (!response.ok) throw new Error(\"Failed to delete recipe\");\n      alert(\"Recipe deleted!\");\n      fetchRecipes(); // Refresh the dropdown\n      fetchSubRecipes();\n    } catch (error) {\n      console.error(\"Error deleting recipe:\", error);\n    }\n  };\n\n  // Update useEffect to also fetch available sub-recipes\n  useEffect(() => {\n    fetchRecipes();\n    fetchSubRecipes();\n    fetchAvailableSubRecipes(); // Add this\n  }, []);\n\n  // Handle recipe selection\n  const handleSelectRecipe = e => {\n    const recipeId = e.target.value;\n    if (recipeId) {\n      fetch(`http://127.0.0.1:5000/api/recipes/${recipeId}`).then(response => response.json()).then(data => setSelectedRecipe(data)).catch(error => console.error(\"Error fetching recipe details:\", error));\n    } else {\n      setSelectedRecipe(null);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Recipes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"recipeDropdown\",\n      children: \"Choose a Recipe:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: editingRecipeId ? \"Edit Recipe\" : \"Add a New Recipe\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleFormSubmit,\n      className: \"recipe-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          placeholder: \"Recipe Name\",\n          value: recipeForm.name,\n          onChange: handleInputChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"cook_time\",\n          placeholder: \"Cook Time (minutes)\",\n          value: recipeForm.cook_time,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"servings\",\n          placeholder: \"Servings\",\n          value: recipeForm.servings,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Ingredients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ingredient-list\",\n        children: recipeForm.ingredients.map((ingredient, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ingredient-row\",\n          children: ingredient.is_sub_recipe ?\n          /*#__PURE__*/\n          // Sub-recipe inputs\n          _jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: ingredient.sub_recipe_id || \"\",\n              onChange: e => handleIngredientChange(index, \"sub_recipe_id\", e.target.value),\n              required: true,\n              style: {\n                flex: \"2\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- Select Sub-Recipe --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 21\n              }, this), availableSubRecipes.map(subRecipe => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: subRecipe.id,\n                children: subRecipe.name\n              }, subRecipe.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 23\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              placeholder: \"Quantity\",\n              value: ingredient.quantity || \"\",\n              onChange: e => handleIngredientChange(index, \"quantity\", e.target.value),\n              style: {\n                flex: \"1\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: ingredient.unit || \"serving\",\n              onChange: e => handleIngredientChange(index, \"unit\", e.target.value),\n              style: {\n                flex: \"1\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"serving\",\n                children: \"Serving\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"whole\",\n                children: \"Whole Recipe\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"half\",\n                children: \"Half Recipe\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"quarter\",\n                children: \"Quarter Recipe\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sub-recipe-tag\",\n              children: \"Sub-Recipe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"remove-btn\",\n              onClick: () => removeIngredient(index),\n              children: \"X\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) :\n          /*#__PURE__*/\n          // Regular ingredient inputs\n          _jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Quantity\",\n              value: ingredient.quantity || \"\",\n              onChange: e => handleIngredientChange(index, \"quantity\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: ingredient.unit || \"\",\n              onChange: e => handleIngredientChange(index, \"unit\", e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Unit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                label: \"Volume\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"tsp\",\n                  children: \"Teaspoon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"tbsp\",\n                  children: \"Tablespoon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"fl_oz\",\n                  children: \"Fluid Ounce\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"cup\",\n                  children: \"Cup\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"pt\",\n                  children: \"Pint\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"qt\",\n                  children: \"Quart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 379,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"gal\",\n                  children: \"Gallon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"ml\",\n                  children: \"Milliliter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"l\",\n                  children: \"Liter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"dl\",\n                  children: \"Deciliter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                label: \"Weight\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"oz\",\n                  children: \"Ounce\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"lb\",\n                  children: \"Pound\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"g\",\n                  children: \"Gram\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"kg\",\n                  children: \"Kilogram\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"mg\",\n                  children: \"Milligram\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                label: \"Count-Based\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"piece\",\n                  children: \"Piece\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"dozen\",\n                  children: \"Dozen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"whole\",\n                  children: \"Whole\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                label: \"Specialty\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"can\",\n                  children: \"Can\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"packet\",\n                  children: \"Packet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"stick\",\n                  children: \"Stick\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"block\",\n                  children: \"Block\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: ingredient.size || \"\",\n              onChange: e => handleIngredientChange(index, \"size\", e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Size\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"small\",\n                children: \"Small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"medium\",\n                children: \"Medium\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"large\",\n                children: \"Large\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Descriptor (e.g., diced, fresh)\",\n              value: ingredient.descriptor || \"\",\n              onChange: e => handleIngredientChange(index, \"descriptor\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Item Name (required)\",\n              value: ingredient.item_name || \"\",\n              onChange: e => handleIngredientChange(index, \"item_name\", e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Additional Descriptor\",\n              value: ingredient.additional_descriptor || \"\",\n              onChange: e => handleIngredientChange(index, \"additional_descriptor\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"remove-btn\",\n              onClick: () => removeIngredient(index),\n              children: \"X\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"add-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"add-btn\",\n          onClick: addIngredient,\n          children: \"+ Add Ingredient\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"add-sub-btn\",\n          onClick: addSubRecipe,\n          children: \"+ Add Sub-Recipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Instructions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"instructions\",\n        placeholder: \"Instructions\",\n        value: recipeForm.instructions,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Parent Recipe (Optional, for Sub-Recipes)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"parentRecipeId\",\n        value: recipeForm.parentRecipeId,\n        onChange: handleInputChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- No Parent (Regular Recipe) --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this), recipes.map(recipe => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: recipe.id,\n          children: recipe.name\n        }, recipe.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"submit-btn\",\n        children: editingRecipeId ? \"Update Recipe\" : \"Add Recipe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      id: \"recipeDropdown\",\n      onChange: handleSelectRecipe,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"-- Select a Recipe --\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 9\n      }, this), recipes.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          disabled: true,\n          children: \"-- Recipes --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this), recipes.map(recipe => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: recipe.id,\n          children: recipe.name\n        }, recipe.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true), subRecipes.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          disabled: true,\n          children: \"-- Sub-Recipes --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 13\n        }, this), subRecipes.map(subRecipe => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: subRecipe.id,\n          children: [subRecipe.name, \" (Sub)\"]\n        }, subRecipe.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 7\n    }, this), selectedRecipe && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"20px\",\n        border: \"1px solid #ccc\",\n        padding: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: selectedRecipe.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Cook Time:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 14\n        }, this), \" \", selectedRecipe.cook_time || \"N/A\", \" minutes\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Servings:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 14\n        }, this), \" \", selectedRecipe.servings || \"N/A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Ingredients:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: selectedRecipe.ingredients && selectedRecipe.ingredients.length > 0 ? selectedRecipe.ingredients.map((ingredient, index) => {\n          // Check if the ingredient is actually a sub-recipe\n          if (ingredient.ingredient && ingredient.ingredient.used_in_recipes && ingredient.ingredient.used_in_recipes.some(r => r.id)) {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"sub-recipe\",\n              onClick: () => toggleSubRecipe(ingredient.ingredient.id),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"green\",\n                  cursor: \"pointer\"\n                },\n                children: [ingredient.ingredient.name, \" (Sub-Recipe) \\u2B07\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 525,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                id: `sub-recipe-${ingredient.ingredient.id}`,\n                style: {\n                  display: \"none\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 528,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 524,\n              columnNumber: 21\n            }, this);\n          } else {\n            var _ingredient$ingredien;\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [ingredient.quantity, \" \", ingredient.unit, \" - \", ((_ingredient$ingredien = ingredient.ingredient) === null || _ingredient$ingredien === void 0 ? void 0 : _ingredient$ingredien.name) || \"N/A\"]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 21\n            }, this);\n          }\n        }) : /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"No ingredients listed.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 11\n      }, this), selectedRecipe.components && selectedRecipe.components.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Sub-Recipes:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: selectedRecipe.components.map((component, index) => {\n            var _component$sub_recipe;\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [component.quantity, \" \", ((_component$sub_recipe = component.sub_recipe) === null || _component$sub_recipe === void 0 ? void 0 : _component$sub_recipe.name) || \"Unknown Recipe\", /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setSelectedRecipe(component.sub_recipe);\n                },\n                className: \"view-sub-btn\",\n                children: \"View\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 21\n              }, this)]\n            }, `component-${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Instructions:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: selectedRecipe.instructions || \"No instructions available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setEditingRecipeId(selectedRecipe.id),\n        children: \"Edit Recipe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleDeleteRecipe(selectedRecipe.id),\n        style: {\n          background: \"red\",\n          color: \"white\",\n          marginLeft: \"10px\"\n        },\n        children: \"Delete Recipe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 281,\n    columnNumber: 5\n  }, this);\n}\n_s(Recipes, \"KxTEOfYtqGrqvXTAe9/QOhp7Q+8=\");\n_c = Recipes;\nexport default Recipes;\nvar _c;\n$RefreshReg$(_c, \"Recipes\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","Recipes","_s","recipes","setRecipes","subRecipes","setSubRecipes","selectedRecipe","setSelectedRecipe","expandedSubRecipes","setExpandedSubRecipes","availableSubRecipes","setAvailableSubRecipes","recipeForm","setRecipeForm","name","cook_time","servings","instructions","parentRecipeId","ingredients","editingRecipeId","setEditingRecipeId","fetchAvailableSubRecipes","response","fetch","data","json","error","console","checkCircularReference","parentId","subRecipeId","method","headers","body","JSON","stringify","parent_id","sub_recipe_id","circular","addSubRecipe","prevForm","is_sub_recipe","quantity","unit","fetchRecipes","uniqueRecipes","filter","recipe","index","self","findIndex","r","id","toggleSubRecipe","prevState","subRecipe","prev","fetchSubRecipes","Array","isArray","handleInputChange","e","target","value","addIngredient","size","descriptor","item_name","additional_descriptor","handleIngredientChange","field","updatedIngredients","map","ingredient","i","then","isCircular","alert","removeIngredient","_","handleFormSubmit","preventDefault","url","parent_recipe_id","ok","Error","handleDeleteRecipe","recipeId","window","confirm","handleSelectRecipe","catch","children","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","onSubmit","className","type","placeholder","onChange","required","style","flex","onClick","label","length","disabled","marginTop","border","padding","used_in_recipes","some","color","cursor","display","_ingredient$ingredien","components","component","_component$sub_recipe","sub_recipe","background","marginLeft","_c","$RefreshReg$"],"sources":["G:/GroceriesProject/Kitchenapp/frontend/src/pages/Recipes.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nfunction Recipes() {\r\n  const [recipes, setRecipes] = useState([]);\r\n  const [subRecipes, setSubRecipes] = useState([]);\r\n  const [selectedRecipe, setSelectedRecipe] = useState(null);\r\n  const [expandedSubRecipes, setExpandedSubRecipes] = useState({});\r\n  const [availableSubRecipes, setAvailableSubRecipes] = useState([]);\r\n  \r\n  const [recipeForm, setRecipeForm] = useState({\r\n    name: \"\",\r\n    cook_time: \"\",\r\n    servings: \"\",\r\n    instructions: \"\",\r\n    parentRecipeId: \"\",  // ✅ NEW: Store parent recipe ID\r\n    ingredients: [],  // ✅ NEW: Store ingredients as an array\r\n  });\r\n  \r\n  \r\n  const [editingRecipeId, setEditingRecipeId] = useState(null);\r\n  \r\n  // Add this function to fetch available sub-recipes\r\nconst fetchAvailableSubRecipes = async () => {\r\n  try {\r\n    const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes/\");\r\n    const data = await response.json();\r\n    setAvailableSubRecipes(data);\r\n  } catch (error) {\r\n    console.error(\"Error fetching available sub-recipes:\", error);\r\n  }\r\n};\r\n\r\n// Add this function to check for circular references\r\nconst checkCircularReference = async (parentId, subRecipeId) => {\r\n  try {\r\n    const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes/check_circular\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ parent_id: parentId, sub_recipe_id: subRecipeId })\r\n    });\r\n    const data = await response.json();\r\n    return data.circular;\r\n  } catch (error) {\r\n    console.error(\"Error checking circular reference:\", error);\r\n    return true; // Assume circular to be safe\r\n  }\r\n};\r\n\r\n// Add a new function to handle adding a sub-recipe\r\nconst addSubRecipe = () => {\r\n  setRecipeForm((prevForm) => ({\r\n    ...prevForm,\r\n    ingredients: [\r\n      ...prevForm.ingredients,\r\n      {\r\n        is_sub_recipe: true,\r\n        sub_recipe_id: \"\",\r\n        quantity: \"1\",\r\n        unit: \"serving\",\r\n      },\r\n    ],\r\n  }));\r\n};\r\n\r\n  const fetchRecipes = async () => {\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:5000/api/recipes\");\r\n      const data = await response.json();\r\n  \r\n      // Remove duplicate recipes (filter by unique recipe ID)\r\n      const uniqueRecipes = data.filter(\r\n        (recipe, index, self) => index === self.findIndex(r => r.id === recipe.id)\r\n      );\r\n  \r\n      setRecipes(uniqueRecipes);\r\n    } catch (error) {\r\n      console.error(\"Error fetching recipes:\", error);\r\n    }\r\n  };\r\n  \r\n  const toggleSubRecipe = async (subRecipeId) => {\r\n    setExpandedSubRecipes(prevState => ({\r\n      ...prevState,\r\n      [subRecipeId]: !prevState[subRecipeId], // Toggle open/closed state\r\n    }));\r\n  \r\n    if (!expandedSubRecipes[subRecipeId]) {\r\n      try {\r\n        const response = await fetch(`http://127.0.0.1:5000/api/sub_recipes/${subRecipeId}`);\r\n        const subRecipe = await response.json();\r\n  \r\n        setSubRecipes((prev) => ({\r\n          ...prev,\r\n          [subRecipeId]: subRecipe.ingredients,\r\n        }));\r\n      } catch (error) {\r\n        console.error(\"Error loading sub-recipe:\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const fetchSubRecipes = async () => {\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:5000/api/sub_recipes\");\r\n      const data = await response.json();\r\n  \r\n      if (Array.isArray(data)) {\r\n        setSubRecipes(data);\r\n      } else {\r\n        console.error(\"Unexpected response format:\", data);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching sub-recipes:\", error);\r\n    }\r\n  };\r\n  \r\n  \r\n  \r\n\r\n  // Handle input changes\r\n  const handleInputChange = (e) => {\r\n    setRecipeForm({ ...recipeForm, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // Add a new ingredient input\r\n  const addIngredient = () => {\r\n    setRecipeForm((prevForm) => ({\r\n      ...prevForm,\r\n      ingredients: [\r\n        ...prevForm.ingredients,\r\n        {\r\n          quantity: \"\",\r\n          unit: \"\",\r\n          size: \"\",\r\n          descriptor: \"\",\r\n          item_name: \"\",\r\n          additional_descriptor: \"\",\r\n        },\r\n      ],\r\n    }));\r\n  };\r\n  \r\n  \r\n  const handleIngredientChange = (index, field, value) => {\r\n    setRecipeForm((prevForm) => {\r\n      const updatedIngredients = prevForm.ingredients.map((ingredient, i) => {\r\n        if (i !== index) return ingredient;\r\n        \r\n        // If changing sub_recipe_id, check for circular reference\r\n        if (field === \"sub_recipe_id\" && editingRecipeId) {\r\n          checkCircularReference(editingRecipeId, value)\r\n            .then(isCircular => {\r\n              if (isCircular) {\r\n                alert(\"Can't add this sub-recipe as it would create a circular reference!\");\r\n                return { ...ingredient }; // Keep original value\r\n              }\r\n            });\r\n        }\r\n        \r\n        return { ...ingredient, [field]: value };\r\n      });\r\n      return { ...prevForm, ingredients: updatedIngredients };\r\n    });\r\n  };\r\n  \r\n  \r\n  // Remove an ingredient\r\n  const removeIngredient = (index) => {\r\n    const updatedIngredients = recipeForm.ingredients.filter((_, i) => i !== index);\r\n    setRecipeForm({ ...recipeForm, ingredients: updatedIngredients });\r\n  };\r\n  \r\n\r\n  // Submit form (Create or Update)\r\n  const handleFormSubmit = async (e) => {\r\n    e.preventDefault();\r\n  \r\n    const method = editingRecipeId ? \"PUT\" : \"POST\";\r\n    const url = editingRecipeId\r\n      ? `http://127.0.0.1:5000/api/recipes/${editingRecipeId}`\r\n      : \"http://127.0.0.1:5000/api/recipes\";\r\n  \r\n    // Prepare ingredients, separating regular ingredients from sub-recipes\r\n    const ingredients = recipeForm.ingredients.map(ingredient => {\r\n      if (ingredient.is_sub_recipe) {\r\n        return {\r\n          sub_recipe_id: ingredient.sub_recipe_id,\r\n          quantity: ingredient.quantity,\r\n          unit: ingredient.unit,\r\n        };\r\n      } else {\r\n        return {\r\n          item_name: ingredient.item_name,\r\n          quantity: ingredient.quantity,\r\n          unit: ingredient.unit,\r\n          size: ingredient.size,\r\n          descriptor: ingredient.descriptor,\r\n          additional_descriptor: ingredient.additional_descriptor\r\n        };\r\n      }\r\n    });\r\n  \r\n    try {\r\n      const response = await fetch(url, {\r\n        method: method,\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          name: recipeForm.name,  \r\n          cook_time: recipeForm.cook_time,\r\n          servings: recipeForm.servings,\r\n          instructions: recipeForm.instructions,\r\n          parent_recipe_id: recipeForm.parentRecipeId || null,\r\n          ingredients: ingredients\r\n        })\r\n      });\r\n  \r\n      if (!response.ok) throw new Error(\"Failed to save recipe\");\r\n  \r\n      alert(editingRecipeId ? \"Recipe updated!\" : \"Recipe added!\");\r\n      setRecipeForm({ \r\n        name: \"\", \r\n        cook_time: \"\", \r\n        servings: \"\", \r\n        instructions: \"\", \r\n        ingredients: [] \r\n      });\r\n      setEditingRecipeId(null);\r\n  \r\n      fetchRecipes();\r\n      fetchSubRecipes();\r\n      fetchAvailableSubRecipes();\r\n  \r\n    } catch (error) {\r\n      console.error(\"Error saving recipe:\", error);\r\n    }\r\n  };\r\n  \r\n  \r\n\r\n  const handleDeleteRecipe = async (recipeId) => {\r\n    if (!window.confirm(\"Are you sure you want to delete this recipe?\")) return;\r\n  \r\n    try {\r\n      const response = await fetch(`http://127.0.0.1:5000/api/recipes/${recipeId}`, {\r\n        method: \"DELETE\",\r\n      });\r\n  \r\n      if (!response.ok) throw new Error(\"Failed to delete recipe\");\r\n  \r\n      alert(\"Recipe deleted!\");\r\n      fetchRecipes(); // Refresh the dropdown\r\n      fetchSubRecipes()\r\n    } catch (error) {\r\n      console.error(\"Error deleting recipe:\", error);\r\n    }\r\n  };\r\n\r\n// Update useEffect to also fetch available sub-recipes\r\nuseEffect(() => {\r\n  fetchRecipes();\r\n  fetchSubRecipes();\r\n  fetchAvailableSubRecipes(); // Add this\r\n}, []);\r\n  \r\n  \r\n\r\n  // Handle recipe selection\r\n  const handleSelectRecipe = (e) => {\r\n    const recipeId = e.target.value;\r\n    if (recipeId) {\r\n      fetch(`http://127.0.0.1:5000/api/recipes/${recipeId}`)\r\n        .then((response) => response.json())\r\n        .then((data) => setSelectedRecipe(data))\r\n        .catch((error) => console.error(\"Error fetching recipe details:\", error));\r\n    } else {\r\n      setSelectedRecipe(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Recipes</h1>\r\n      <label htmlFor=\"recipeDropdown\">Choose a Recipe:</label>\r\n      <h2>{editingRecipeId ? \"Edit Recipe\" : \"Add a New Recipe\"}</h2>\r\n      <form onSubmit={handleFormSubmit} className=\"recipe-form\">\r\n        <div className=\"form-row\">\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"Recipe Name\"\r\n            value={recipeForm.name}\r\n            onChange={handleInputChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            name=\"cook_time\"\r\n            placeholder=\"Cook Time (minutes)\"\r\n            value={recipeForm.cook_time}\r\n            onChange={handleInputChange}\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            name=\"servings\"\r\n            placeholder=\"Servings\"\r\n            value={recipeForm.servings}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n\r\n        <h3>Ingredients</h3>\r\n        <div className=\"ingredient-list\">\r\n          {recipeForm.ingredients.map((ingredient, index) => (\r\n            <div key={index} className=\"ingredient-row\">\r\n              {ingredient.is_sub_recipe ? (\r\n                // Sub-recipe inputs\r\n                <>\r\n                  <select\r\n                    value={ingredient.sub_recipe_id || \"\"}\r\n                    onChange={(e) => handleIngredientChange(index, \"sub_recipe_id\", e.target.value)}\r\n                    required\r\n                    style={{ flex: \"2\" }}\r\n                  >\r\n                    <option value=\"\">-- Select Sub-Recipe --</option>\r\n                    {availableSubRecipes.map((subRecipe) => (\r\n                      <option key={subRecipe.id} value={subRecipe.id}>\r\n                        {subRecipe.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                  \r\n                  <input\r\n                    type=\"number\"\r\n                    placeholder=\"Quantity\"\r\n                    value={ingredient.quantity || \"\"}\r\n                    onChange={(e) => handleIngredientChange(index, \"quantity\", e.target.value)}\r\n                    style={{ flex: \"1\" }}\r\n                  />\r\n                  \r\n                  <select\r\n                    value={ingredient.unit || \"serving\"}\r\n                    onChange={(e) => handleIngredientChange(index, \"unit\", e.target.value)}\r\n                    style={{ flex: \"1\" }}\r\n                  >\r\n                    <option value=\"serving\">Serving</option>\r\n                    <option value=\"whole\">Whole Recipe</option>\r\n                    <option value=\"half\">Half Recipe</option>\r\n                    <option value=\"quarter\">Quarter Recipe</option>\r\n                  </select>\r\n                  \r\n                  <div className=\"sub-recipe-tag\">Sub-Recipe</div>\r\n                  \r\n                  {/* Remove Sub-Recipe Button */}\r\n                  <button type=\"button\" className=\"remove-btn\" onClick={() => removeIngredient(index)}>X</button>\r\n                </>\r\n              ) : (\r\n                // Regular ingredient inputs\r\n                <>\r\n                  {/* Quantity Input */}\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Quantity\"\r\n                    value={ingredient.quantity || \"\"}\r\n                    onChange={(e) => handleIngredientChange(index, \"quantity\", e.target.value)}\r\n                  />\r\n\r\n                  {/* Unit Dropdown */}\r\n                  <select\r\n                    value={ingredient.unit || \"\"}\r\n                    onChange={(e) => handleIngredientChange(index, \"unit\", e.target.value)}\r\n                  >\r\n                    <option value=\"\">Unit</option>\r\n                    <optgroup label=\"Volume\">\r\n                      <option value=\"tsp\">Teaspoon</option>\r\n                      <option value=\"tbsp\">Tablespoon</option>\r\n                      <option value=\"fl_oz\">Fluid Ounce</option>\r\n                      <option value=\"cup\">Cup</option>\r\n                      <option value=\"pt\">Pint</option>\r\n                      <option value=\"qt\">Quart</option>\r\n                      <option value=\"gal\">Gallon</option>\r\n                      <option value=\"ml\">Milliliter</option>\r\n                      <option value=\"l\">Liter</option>\r\n                      <option value=\"dl\">Deciliter</option>\r\n                    </optgroup>\r\n                    <optgroup label=\"Weight\">\r\n                      <option value=\"oz\">Ounce</option>\r\n                      <option value=\"lb\">Pound</option>\r\n                      <option value=\"g\">Gram</option>\r\n                      <option value=\"kg\">Kilogram</option>\r\n                      <option value=\"mg\">Milligram</option>\r\n                    </optgroup>\r\n                    <optgroup label=\"Count-Based\">\r\n                      <option value=\"piece\">Piece</option>\r\n                      <option value=\"dozen\">Dozen</option>\r\n                      <option value=\"whole\">Whole</option>\r\n                    </optgroup>\r\n                    <optgroup label=\"Specialty\">\r\n                      <option value=\"can\">Can</option>\r\n                      <option value=\"packet\">Packet</option>\r\n                      <option value=\"stick\">Stick</option>\r\n                      <option value=\"block\">Block</option>\r\n                    </optgroup>\r\n                  </select>\r\n\r\n                  {/* Size Dropdown */}\r\n                  <select\r\n                    value={ingredient.size || \"\"}\r\n                    onChange={(e) => handleIngredientChange(index, \"size\", e.target.value)}\r\n                  >\r\n                    <option value=\"\">Size</option>\r\n                    <option value=\"small\">Small</option>\r\n                    <option value=\"medium\">Medium</option>\r\n                    <option value=\"large\">Large</option>\r\n                  </select>\r\n\r\n                  {/* Descriptor Input */}\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Descriptor (e.g., diced, fresh)\"\r\n                    value={ingredient.descriptor || \"\"}\r\n                    onChange={(e) => handleIngredientChange(index, \"descriptor\", e.target.value)}\r\n                  />\r\n\r\n                  {/* Item Name Input */}\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Item Name (required)\"\r\n                    value={ingredient.item_name || \"\"}\r\n                    onChange={(e) => handleIngredientChange(index, \"item_name\", e.target.value)}\r\n                    required\r\n                  />\r\n\r\n                  {/* Additional Descriptor Input */}\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Additional Descriptor\"\r\n                    value={ingredient.additional_descriptor || \"\"}\r\n                    onChange={(e) => handleIngredientChange(index, \"additional_descriptor\", e.target.value)}\r\n                  />\r\n\r\n                  {/* Remove Ingredient Button */}\r\n                  <button type=\"button\" className=\"remove-btn\" onClick={() => removeIngredient(index)}>X</button>\r\n                </>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Add buttons for both regular ingredients and sub-recipes */}\r\n        <div className=\"add-buttons\">\r\n          <button type=\"button\" className=\"add-btn\" onClick={addIngredient}>+ Add Ingredient</button>\r\n          <button type=\"button\" className=\"add-sub-btn\" onClick={addSubRecipe}>+ Add Sub-Recipe</button>\r\n        </div>\r\n\r\n        <h3>Instructions</h3>\r\n        <textarea\r\n          name=\"instructions\"\r\n          placeholder=\"Instructions\"\r\n          value={recipeForm.instructions}\r\n          onChange={handleInputChange}\r\n        />\r\n\r\n        <h3>Parent Recipe (Optional, for Sub-Recipes)</h3>\r\n        <select\r\n          name=\"parentRecipeId\"\r\n          value={recipeForm.parentRecipeId}\r\n          onChange={handleInputChange}\r\n        >\r\n          <option value=\"\">-- No Parent (Regular Recipe) --</option>\r\n          {recipes.map((recipe) => (\r\n            <option key={recipe.id} value={recipe.id}>\r\n              {recipe.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <button type=\"submit\" className=\"submit-btn\">{editingRecipeId ? \"Update Recipe\" : \"Add Recipe\"}</button>\r\n      </form>\r\n\r\n      <select id=\"recipeDropdown\" onChange={handleSelectRecipe}>\r\n        <option value=\"\">-- Select a Recipe --</option>\r\n\r\n        {/* Regular Recipes */}\r\n        {recipes.length > 0 && (\r\n          <>\r\n            <option disabled>-- Recipes --</option>\r\n            {recipes.map((recipe) => (\r\n              <option key={recipe.id} value={recipe.id}>\r\n                {recipe.name}\r\n              </option>\r\n            ))}\r\n          </>\r\n        )}\r\n\r\n        {/* Sub-Recipes Section */}\r\n        {subRecipes.length > 0 && (\r\n          <>\r\n            <option disabled>-- Sub-Recipes --</option>\r\n            {subRecipes.map((subRecipe) => (\r\n              <option key={subRecipe.id} value={subRecipe.id}>\r\n                {subRecipe.name} (Sub)\r\n              </option>\r\n            ))}\r\n          </>\r\n        )}\r\n      </select>\r\n\r\n      {/* Single combined recipe display section */}\r\n      {selectedRecipe && (\r\n        <div style={{ marginTop: \"20px\", border: \"1px solid #ccc\", padding: \"10px\" }}>\r\n          <h2>{selectedRecipe.name}</h2>\r\n          <p><strong>Cook Time:</strong> {selectedRecipe.cook_time || \"N/A\"} minutes</p>\r\n          <p><strong>Servings:</strong> {selectedRecipe.servings || \"N/A\"}</p>\r\n          \r\n          <h3>Ingredients:</h3>\r\n          <ul>\r\n            {selectedRecipe.ingredients && selectedRecipe.ingredients.length > 0 ? (\r\n              selectedRecipe.ingredients.map((ingredient, index) => {\r\n                // Check if the ingredient is actually a sub-recipe\r\n                if (ingredient.ingredient && \r\n                    ingredient.ingredient.used_in_recipes && \r\n                    ingredient.ingredient.used_in_recipes.some(r => r.id)) {\r\n                  return (\r\n                    <li key={index} className=\"sub-recipe\" onClick={() => toggleSubRecipe(ingredient.ingredient.id)}>\r\n                      <span style={{ color: \"green\", cursor: \"pointer\" }}>\r\n                        {ingredient.ingredient.name} (Sub-Recipe) ⬇\r\n                      </span>\r\n                      <ul id={`sub-recipe-${ingredient.ingredient.id}`} style={{ display: \"none\" }}></ul>\r\n                    </li>\r\n                  );\r\n                } else {\r\n                  return (\r\n                    <li key={index}>\r\n                      {ingredient.quantity} {ingredient.unit} - {ingredient.ingredient?.name || \"N/A\"}\r\n                    </li>\r\n                  );\r\n                }\r\n              })\r\n            ) : (\r\n              <li>No ingredients listed.</li>\r\n            )}\r\n          </ul>\r\n          \r\n          {/* Show sub-recipes if they exist */}\r\n          {selectedRecipe.components && selectedRecipe.components.length > 0 && (\r\n            <>\r\n              <h3>Sub-Recipes:</h3>\r\n              <ul>\r\n                {selectedRecipe.components.map((component, index) => (\r\n                  <li key={`component-${index}`}>\r\n                    {component.quantity} {component.sub_recipe?.name || \"Unknown Recipe\"}\r\n                    <button \r\n                      onClick={() => {\r\n                        setSelectedRecipe(component.sub_recipe);\r\n                      }}\r\n                      className=\"view-sub-btn\"\r\n                    >\r\n                      View\r\n                    </button>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </>\r\n          )}\r\n\r\n          <h3>Instructions:</h3>\r\n          <p>{selectedRecipe.instructions || \"No instructions available.\"}</p>\r\n\r\n          {/* Edit Button */}\r\n          <button onClick={() => setEditingRecipeId(selectedRecipe.id)}>\r\n            Edit Recipe\r\n          </button>\r\n\r\n          {/* Delete Button */}\r\n          <button onClick={() => handleDeleteRecipe(selectedRecipe.id)} style={{ background: \"red\", color: \"white\", marginLeft: \"10px\" }}>\r\n            Delete Recipe\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Recipes;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}